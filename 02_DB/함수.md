# 함수(Function)
- 다양한 데이터 검색을 위해 필요한 기능
- 출력값을 리턴이라고 하며 `계산 결과가 딱! 하나만 리턴함`

|함수의 종류 | | 설명|
|--|---|---|
|단일행 함수|정의|하나의 행을 입력받아 하나의 행을 반환하는 함수|
||종류|문자함수, 숫자함수, 날짜함수, 변환 함수, 일반함수|
|다중 행 함수|정의|여러 개의 행을 입력받아 하나의 행을 반환하는 함수|
||종류|그룹 함수|


# 📌문자열 함수
## 대소문자 변환 함수(UPPER, LOWER, INITCAP)

- UPPER(s) : 대문자로 변환

- LOWER(s) : 소문자로 변환

- INITCAP(s) : 단어의 첫자만 대문자로 바꾼다

```sql
SELECT
    first_name
FROM
    employees
WHERE
    lower(first_name) LIKE '%an%';
```

💡 오라클은 대소문자를 구분함, 반면 SQL Server와 MariaDB는 문자열의 대소문자를 구분하지 않음

## 문자에서 특정 철차 추출하기(SUBSTR)

- SUBSTR(s, 시작위치, 가져올 문자 개수)

- SUBSTR(s, 1, 가져올 문자 개수) : 왼쪽에서부터 가져옴

- SUBSTR(s, -가져올 문자 개수) : `오른쪽`에서부터 가져옴

💡 SQL은 첨자 1부터 시작!

> MITH
```sql
SELECT SUBSTR('SMITH', 2)
FROM dual;
```

> 금수
```sql
SELECT SUBSTR('아름다운 대한민국 금수강산', -4, 2)
FROM dual;
```

## 문자열의 길이를 출력하기(LENGTH)
> 5
```sql
SELECT length('가나다라마')
FROM dual;
```
- LENGTHB : 바이트의 길이를 반환
> 15 - 한글 3byte
```sql
SELECT lengthb('가나다라마')
FROM dual;
```

## 문자에서 특정 철자의 위치 출력하기(INSTR)
- INSTR(컬럼, 검색어)
- INSTR(컬럼, 검색어, 시작위치)
- 못 찾으면 0을 반환
> 2
```sql
SELECT instr('SMITH','M')
FROM dual;
```
>  gmail.com
```sql
SELECT substr('abcdefg@gmail.com',instr('abcdefg@gmail.com','@')+1)
FROM dual;
```

## 특정 절차를 다른 철자로 변경하기(REPLACE)
- REPLACE(컬럼, 찾을 문자열, 바꿀 문자열)
```sql
select
    replace('홍길동','홍','길'),
    replace('홍길동','이','길'),
    replace('홍길홍','홍','길')
from dual;
```

## 특정 절차를 N개 만큼 채우기(LPAD, RPAD)
- lpad(컬럼, 개수, 문자)
- rpad(컬럼, 개수, 문자)

> bbbba / 001 / 100
```SQL
select
    'a',
    lpad('a',5,'b'), -- 모자란 공간을 채워줌
    lpad('1',3,'0'),
    rpad('1',3,'0')
from dual;
```

## 특정 절차 잘라내기(TRIM, RTRIM, LTRIM)


# 📌수치(수학) 함수

## 반올림(ROUND)
> 소수점 이후 2번째 자리에서 반올림 -> 876.6
```sql
SELECT '876.567' as 숫자, ROUN(876.567, 1)
FROM dual;
```

## 숫자를 버림(TRUNC)
> 876.5
```sql
SELECT '876.567' as 숫자, TRUNC(876.567, 1)
FROM dual;
```
## 숫자를 버림, 제일 바닥(FLOOR)
## 숫자를 올림(CEIL)
## 나머지 값(MOD)
> 사원 번호가 짝수인 사원들의 사원번호와 이름을 출력해라.
```sql
SELECT empno, ename
FROM emp
WHERE MOD(empno,2) = 0;
```
```sql
SELECT
    10 / 3,
    FLOOR(10/3) as "몫",
    MOD(10,3) as "나머지"
FROM
    dual;
```


# 📌집계 함수
- 집계는 모든 레코드의 값을 참고하여 `하나`의 값을 구하는 것
- 모든 집계 함수는 `null`을 무시하고 계산함
- 단, `COUNT(*)`는 null을 포함 / 만족하는 레코드가 없다는 뜻으로 0을 리턴
- `WHERE절 사용 불가`

## 건수 출력하기(COUNT)
- 결과 테이블의 레코드 수를 반환 > SELECT 결과 레코드 수
- NUMBER COUNT(컬럼명) : 매개변수의 컬럼은 최대 1개 or *(all)
- `null값 제외`

```sql
SELECT
    COUNT(*) AS "전체 인원수",
    COUNT(
        CASE
            WHEN gender = 'm' THEN
                gender
        END
    )        AS "남자 인원수",
    COUNT(
        CASE
            WHEN gender = 'f' THEN
                gender
        END
    )        AS "여자 인원수"
FROM
    tblcomedian;
```

## 합계와 평균

1. SUM : 총합

2. AVG : 평균 - ``null값 제외``

3. MIN : 최소값

4. MAX : 최대값

💡 MIN, MAX 함수는 숫자, 문자, 날짜 모두 적용 가능